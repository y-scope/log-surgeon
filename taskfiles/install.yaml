version: "3"

set: ["u", "pipefail"]
shopt: ["globstar"]

tasks:
  debug:
    requires:
      vars: ["PREFIX"]
    deps:
      - ":build:debug"
    cmds:
      - task: ":utils:cmake:install"
        vars:
          BUILD_DIR: "{{.G_LS_BUILD_DIR}}/debug"
          INSTALL_PREFIX: "{{.PREFIX}}"
          NAME: "log-surgeon"

  release:
    requires:
      vars: ["PREFIX"]
    deps:
      - ":build:release"
    cmds:
      - task: ":utils:cmake:install"
        vars:
          BUILD_DIR: "{{.G_LS_BUILD_DIR}}/release"
          INSTALL_PREFIX: "{{.PREFIX}}"
          NAME: "log-surgeon"
